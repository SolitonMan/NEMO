{% extends 'base.html' %}
{% load custom_tags_and_filters %}
{% block title %}Add Requirements{% endblock %}
{% block content %}
<h2>Add Requirement</h2>
<form method="post">
    {% csrf_token %}
    <div class="form-group">
        <label>Name</label>
        <input type="text" name="name" class="form-control" required>
    </div>
    <div class="form-group">
        <label>Description</label>
        <textarea name="description" class="form-control"></textarea>
    </div>
    <div class="form-group">
        <label>Resource Link</label>
        <input type="url" name="resource_link" class="form-control">
    </div>
    <div class="form-group">
        <label>Retrain Interval (days)</label>
        <input type="number" name="retrain_interval_days" class="form-control" value="365">
    </div>
    <div class="form-group">
        <label>Expected completion time (minutes)</label>
        <input type="number" name="expected_completion_time" class="form-control" value="">
    </div>
    <div class="form-group">
        <label>Login Requirement</label>
        <input type="checkbox" name="login_requirement_flag">
    </div>
    <div class="form-group">
        <label>Automated Update</label>
        <input type="checkbox" name="automated_update">
    </div>
    <button type="submit" class="btn btn-primary">Add Requirement</button>
</form>

<hr>

<h3>Existing Requirements</h3>
<table class="table">
	<tr>
		<th>Name</th>
		<th>Description</th>
		<th>Resource Link</th>
		<th>Retrain Interval (days)</th>
		<th>Expected Completion Time (minutes)</th>
	</tr>
	{% for req in requirements %}
	<tr>
		<td>
			<a href="{% url 'edit_requirement' req.id %}">{{ req.name }}</a>
		</td>
		<td>
			{{ req.description|default:"No description" }}
		</td>
		<td>
			{% if req.resource_link %}
			<a href="{{ req.resource_link }}" target="_blank">{{ req.resource_link }}</a>
			{% else %}
			No resource link
			{% endif %}
		</td>
		<td>
			{{ req.retrain_interval_days }}
		</td>
		<td>
			{{ req.expected_completion_time }}
		</td>
	</tr>
	{% empty %}
	<tr><td colspan="5">No requirements found.</td></tr>
	{% endfor %}
</table>
{% endblock %}